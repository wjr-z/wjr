\doxysection{number.\+hpp}
\hypertarget{number_8hpp_source}{}\label{number_8hpp_source}\index{include/wjr/json/number.hpp@{include/wjr/json/number.hpp}}
\mbox{\hyperlink{number_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ WJR\_JSON\_NUMBER\_HPP\_\_}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ WJR\_JSON\_NUMBER\_HPP\_\_}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{fastfloat_8hpp}{wjr/format/fastfloat.hpp}}>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{json_2detail_8hpp}{wjr/json/detail.hpp}}>}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{namespace\ }wjr::json::number\_detail\ \{}
\DoxyCodeLine{00008\ \textcolor{keyword}{struct\ }number\_writer\ \{}
\DoxyCodeLine{00009\ \ \ \ \ \textcolor{keyword}{using\ }float\_type\ =\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{double}};}
\DoxyCodeLine{00010\ \ \ \ \ \textcolor{keyword}{using\ }support\_integral\ =\ std::true\_type;}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \ \ \ \ number\_writer()\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00013\ \ \ \ \ number\_writer(\textcolor{keyword}{const}\ number\_writer\ \&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00014\ \ \ \ \ number\_writer(number\_writer\ \&\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00015\ \ \ \ \ number\_writer\ \&operator=(\textcolor{keyword}{const}\ number\_writer\ \&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00016\ \ \ \ \ number\_writer\ \&operator=(number\_writer\ \&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00017\ \ \ \ \ \string~number\_writer()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \ \ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_INTRINSIC\_CONSTEXPR}}\ number\_writer(basic\_value\ \&\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{\_value}})\ \mbox{\hyperlink{namespacewjr_af89e8e658fd9c3a3b154c55677a3b528}{noexcept}}\ :\ value(\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{\_value}})\ \{\}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \ \ \ \ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_INTRINSIC\_CONSTEXPR}}\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{uint64\_t}}\ \&get\_u64()\ \mbox{\hyperlink{namespacewjr_af89e8e658fd9c3a3b154c55677a3b528}{noexcept}}\ \{}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ value.m\_type\ =\ \mbox{\hyperlink{namespacewjr_1_1json_a868b4d2701c87c564a940ebb1e263973adce7cc8ec29055c4158828921f2f265e}{value\_t::number\_unsigned}};}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ value.m\_number\_unsigned;}
\DoxyCodeLine{00024\ \ \ \ \ \}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_INTRINSIC\_CONSTEXPR}}\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{int64\_t}}\ \&get\_i64()\ \mbox{\hyperlink{namespacewjr_af89e8e658fd9c3a3b154c55677a3b528}{noexcept}}\ \{}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ value.m\_type\ =\ \mbox{\hyperlink{namespacewjr_1_1json_a868b4d2701c87c564a940ebb1e263973a1e5e7766fdf271e4069d7db9426011b9}{value\_t::number\_signed}};}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ value.m\_number\_signed;}
\DoxyCodeLine{00029\ \ \ \ \ \}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_INTRINSIC\_CONSTEXPR}}\ \textcolor{keywordtype}{double}\ \&get\_float()\ \mbox{\hyperlink{namespacewjr_af89e8e658fd9c3a3b154c55677a3b528}{noexcept}}\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ value.m\_type\ =\ \mbox{\hyperlink{namespacewjr_1_1json_a868b4d2701c87c564a940ebb1e263973ad9966ecb59667235a57b4b999a649eef}{value\_t::number\_float}};}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ value.m\_number\_float;}
\DoxyCodeLine{00034\ \ \ \ \ \}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ basic\_value\ \&value;}
\DoxyCodeLine{00037\ \};}
\DoxyCodeLine{00038\ \}\ \textcolor{comment}{//\ namespace\ wjr::json::number\_detail}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacewjr_1_1fastfloat}{wjr::fastfloat}}\ \{}
\DoxyCodeLine{00041\ \textcolor{keyword}{extern}\ \textcolor{keyword}{template}\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{from\_chars\_result<>}}}
\DoxyCodeLine{00042\ \_\_from\_chars\_impl<json::number\_detail::number\_writer,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ integral\_constant<chars\_format,\ chars\_format::json>>(}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *first,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *last,\ json::number\_detail::number\_writer\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{wr}},}
\DoxyCodeLine{00045\ \ \ \ \ integral\_constant<chars\_format,\ chars\_format::json>\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{options}})\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00046\ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacewjr_1_1json}{wjr::json}}\ \{}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{namespace\ }number\_detail\ \{}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_INTRINSIC\_INLINE}}\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{from\_chars\_result<>}}\ from\_chars\_json(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *first,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *last,}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ basic\_value\ \&value)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{return}\ fastfloat::\_\_from\_chars\_impl(first,\ last,\ number\_writer(value),}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ integral\_constant<chars\_format,\ chars\_format::json>());}
\DoxyCodeLine{00056\ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \}\ \textcolor{comment}{//\ namespace\ number\_detail}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \textcolor{keyword}{namespace\ }detail\ \{}
\DoxyCodeLine{00061\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_PURE}}\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_INTRINSIC\_INLINE}}\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{result<void>}}\ parse\_number(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *first,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *last,}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ basic\_value\ \&value)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{ret}}\ =\ number\_detail::from\_chars\_json(first,\ last,\ value);}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_LIKELY}}(\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{ret}}))\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_UNLIKELY}}(\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{ret}}.ptr\ !=\ last\ \&\&\ !charconv\_detail::isspace(*\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{ret}}.ptr)))\ \{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacewjr_a9953ad41e85ce3ae6a0d32480ae0d0fd}{unexpected}}(\mbox{\hyperlink{namespacewjr_1_1json_a53f9c2c8205f41268c787c984c3228deaf5a233a47e5ff7c164d524802991f9a6}{error\_code::TAPE\_ERROR}});}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \mbox{\hyperlink{namespacewjr_1_1json_a53f9c2c8205f41268c787c984c3228de}{error\_code}}\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{err}}\ =\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{ret}}.ec\ ==\ std::errc::result\_out\_of\_range\ ?\ \mbox{\hyperlink{namespacewjr_1_1json_a53f9c2c8205f41268c787c984c3228deaf21d013dd81ab998dde53b573c56281d}{error\_code::BIGINT\_ERROR}}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{namespacewjr_1_1json_a53f9c2c8205f41268c787c984c3228deaf5a233a47e5ff7c164d524802991f9a6}{error\_code::TAPE\_ERROR}};}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacewjr_a9953ad41e85ce3ae6a0d32480ae0d0fd}{unexpected}}(\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{err}});}
\DoxyCodeLine{00075\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00080\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_PURE}}\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_INTRINSIC\_INLINE}}\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{result<void>}}\ check\_number(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *first,}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *last)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00082\ \ \ \ \ basic\_value\ value(\mbox{\hyperlink{namespacewjr_a1d23c863b7f2cee4674ceeacd52aee31}{default\_construct}});}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordflow}{return}\ parse\_number(first,\ last,\ value);}
\DoxyCodeLine{00084\ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \}\ \textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \}\ \textcolor{comment}{//\ namespace\ wjr::json}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ WJR\_JSON\_NUMBER\_HPP\_\_}}

\end{DoxyCode}
