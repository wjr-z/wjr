\doxysection{object\+\_\+pool.\+hpp}
\hypertarget{object__pool_8hpp_source}{}\label{object__pool_8hpp_source}\index{include/wjr/memory/object\_pool.hpp@{include/wjr/memory/object\_pool.hpp}}
\mbox{\hyperlink{object__pool_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ WJR\_MEMORY\_OBJECT\_POOL\_HPP\_\_}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ WJR\_MEMORY\_OBJECT\_POOL\_HPP\_\_}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#error\ "{}Do\ not\ use\ temporarily"{}}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{forward__list_8hpp}{wjr/container/forward\_list.hpp}}>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{arena_8hpp}{wjr/memory/arena.hpp}}>}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacewjr}{wjr}}\ \{}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{namespace\ }mem::detail\ \{}
\DoxyCodeLine{00012\ \textcolor{keyword}{class\ }\_\_dynamic\_object\_pool\_impl\ \{}
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{keyword}{using\ }node\_type\ =\ intrusive::hlist\_node<>;}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00016\ \ \ \ \ \_\_dynamic\_object\_pool\_impl()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00017\ \ \ \ \ \_\_dynamic\_object\_pool\_impl(\textcolor{keyword}{const}\ \_\_dynamic\_object\_pool\_impl\ \&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00018\ \ \ \ \ \_\_dynamic\_object\_pool\_impl(\_\_dynamic\_object\_pool\_impl\ \&\&other)\ \{}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ replace(\&other.m\_head,\ \&m\_head);}
\DoxyCodeLine{00020\ \ \ \ \ \}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \ \ \_\_dynamic\_object\_pool\_impl\ \&operator=(\textcolor{keyword}{const}\ \_\_dynamic\_object\_pool\_impl\ \&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00023\ \ \ \ \ \_\_dynamic\_object\_pool\_impl\ \&operator=(\_\_dynamic\_object\_pool\_impl\ \&\&other)\ \{}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ replace(\&other.m\_head,\ \&m\_head);}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00026\ \ \ \ \ \}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ \string~\_\_dynamic\_object\_pool\_impl()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_MALLOC}}\ \textcolor{keywordtype}{void}\ *allocate(arena\ \&m\_arena,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{include_2wjr_2arch_2x86_2biginteger_2detail_2gen__addrsblsh__n_8hpp_a42a1da88df05bc933612820bb42db3a2}{n}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_head.next()\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_head.pop\_front();}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_arena.allocate(\mbox{\hyperlink{include_2wjr_2arch_2x86_2biginteger_2detail_2gen__addrsblsh__n_8hpp_a42a1da88df05bc933612820bb42db3a2}{n}});}
\DoxyCodeLine{00036\ \ \ \ \ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordtype}{void}\ deallocate(\textcolor{keywordtype}{void}\ *ptr)\ \textcolor{keyword}{noexcept}\ \{\ m\_head.push\_front(\textcolor{keyword}{static\_cast<}node\_type\ *\textcolor{keyword}{>}(ptr));\ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00041\ \ \ \ \ node\_type\ m\_head;}
\DoxyCodeLine{00042\ \};}
\DoxyCodeLine{00043\ \}\ \textcolor{comment}{//\ namespace\ mem::detail}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Traits>}
\DoxyCodeLine{00046\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classwjr_1_1dynamic__object__pool}{dynamic\_object\_pool}}\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ tableSize\ =\ Traits::size;}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classwjr_1_1dynamic__object__pool_af1f563857045fcc4dea39a7342d2a647}{value\_type}}\ =\ \mbox{\hyperlink{namespacewjr_a69f5110cc164b4f5516e74717d11018b}{T}};}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classwjr_1_1dynamic__object__pool_a5e915b0b973e5bc5bf3e5b7c45c830e4}{size\_type}}\ =\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{size\_t}};}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classwjr_1_1dynamic__object__pool_af3db1f0ccc2a1c96aca0b2cc7240e03b}{difference\_type}}\ =\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{ptrdiff\_t}};}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classwjr_1_1dynamic__object__pool_ab46efffa424beef328dab47888f4cc6e}{propagate\_on\_container\_copy\_assignment}}\ =\ std::false\_type;}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classwjr_1_1dynamic__object__pool_a55e6ea41f957e453029fe5b074f53739}{propagate\_on\_container\_move\_assignment}}\ =\ std::false\_type;}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classwjr_1_1dynamic__object__pool_aa38037f3d2625d734a138667251621fc}{propagate\_on\_container\_swap}}\ =\ std::false\_type;}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classwjr_1_1dynamic__object__pool_ab31b67079538f8abfb2135f285d2718f}{is\_always\_equal}}\ =\ std::false\_type;}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classwjr_1_1dynamic__object__pool_ae6ace4ebc3f99ce17e590736814bb9e5}{is\_trivially\_allocator}}\ =\ std::true\_type;}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Other>}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structwjr_1_1dynamic__object__pool_1_1rebind}{rebind}}\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structwjr_1_1dynamic__object__pool_1_1rebind_a984c188f371315e4b5cc9ffc0ec4bb6a}{other}}\ =\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{dynamic\_object\_pool<Other,\ Traits>}};}
\DoxyCodeLine{00062\ \ \ \ \ \};}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool_acbba40933e074e382e7e94762a021073}{dynamic\_object\_pool}}(\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{uint32\_t}}\ cache\ =\ \mbox{\hyperlink{classwjr_1_1arena_a3ee2a50869d44c89c2ad980f96f92ec5}{arena::default\_cache\_size}},}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classwjr_1_1arena_a5153b06bc306c1698b97d9c5a2aed7de}{arena::Rule}}\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{rule}}\ =\ \mbox{\hyperlink{classwjr_1_1arena_a5153b06bc306c1698b97d9c5a2aed7deac71b336fab4005eabcf1149085a83732}{arena::Rule::Expansion\_Constant}})}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ :\ m\_arena(cache,\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{rule}})\ \{\}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool_a74657184ba8f3aa7c9af1b00b08023b0}{dynamic\_object\_pool}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool}{dynamic\_object\_pool}}\ \&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00069\ \ \ \ \ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool_af335168484766ba9023e15e918f57ee1}{dynamic\_object\_pool}}(\mbox{\hyperlink{classwjr_1_1dynamic__object__pool}{dynamic\_object\_pool}}\ \&\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool}{dynamic\_object\_pool}}\ \&\mbox{\hyperlink{classwjr_1_1dynamic__object__pool_a8d1327cb4a564acd19c9aeaabe976332}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool}{dynamic\_object\_pool}}\ \&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00071\ \ \ \ \ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool}{dynamic\_object\_pool}}\ \&\mbox{\hyperlink{classwjr_1_1dynamic__object__pool_ae9913a0af730e39e4cd200d14cd59f25}{operator=}}(\mbox{\hyperlink{classwjr_1_1dynamic__object__pool}{dynamic\_object\_pool}}\ \&\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00072\ \ \ \ \ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool_a6e2a42623a8cd744d65273c4aa915f69}{\string~dynamic\_object\_pool}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_NODISCARD}}\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_MALLOC}}\ T\ *\mbox{\hyperlink{classwjr_1_1dynamic__object__pool_ade21652a95aa32ec7bd77fe7dc2c0325}{allocate}}(\mbox{\hyperlink{classwjr_1_1dynamic__object__pool_a5e915b0b973e5bc5bf3e5b7c45c830e4}{size\_type}}\ \mbox{\hyperlink{include_2wjr_2arch_2x86_2biginteger_2detail_2gen__addrsblsh__n_8hpp_a42a1da88df05bc933612820bb42db3a2}{n}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_UNLIKELY}}(\mbox{\hyperlink{include_2wjr_2arch_2x86_2biginteger_2detail_2gen__addrsblsh__n_8hpp_a42a1da88df05bc933612820bb42db3a2}{n}}\ ==\ 0))}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2wjr_2arch_2x86_2biginteger_2detail_2gen__addrsblsh__n_8hpp_a42a1da88df05bc933612820bb42db3a2}{n}}\ *=\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespacewjr_a69f5110cc164b4f5516e74717d11018b}{T}});}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ [idx,\ size]\ =\ Traits::get(\mbox{\hyperlink{include_2wjr_2arch_2x86_2biginteger_2detail_2gen__addrsblsh__n_8hpp_a42a1da88df05bc933612820bb42db3a2}{n}});\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_LIKELY}}(idx\ !=\ tableSize))\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}T\ *\textcolor{keyword}{>}(m\_pool[idx].allocate(m\_arena,\ size));}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}T\ *\textcolor{keyword}{>}(Traits::allocate\_large(\mbox{\hyperlink{include_2wjr_2arch_2x86_2biginteger_2detail_2gen__addrsblsh__n_8hpp_a42a1da88df05bc933612820bb42db3a2}{n}}));}
\DoxyCodeLine{00085\ \ \ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool_a1df38d10ef9ab10b178f9a0e0a08312f}{deallocate}}(T\ *ptr,\ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool_a5e915b0b973e5bc5bf3e5b7c45c830e4}{size\_type}}\ \mbox{\hyperlink{include_2wjr_2arch_2x86_2biginteger_2detail_2gen__addrsblsh__n_8hpp_a42a1da88df05bc933612820bb42db3a2}{n}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{include_2wjr_2arch_2x86_2biginteger_2detail_2gen__addrsblsh__n_8hpp_a42a1da88df05bc933612820bb42db3a2}{n}}\ *=\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespacewjr_a69f5110cc164b4f5516e74717d11018b}{T}});}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{auto}\ [idx,\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{\_}}]\ =\ Traits::get(\mbox{\hyperlink{include_2wjr_2arch_2x86_2biginteger_2detail_2gen__addrsblsh__n_8hpp_a42a1da88df05bc933612820bb42db3a2}{n}});\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_LIKELY}}(idx\ !=\ tableSize))\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_pool[idx].deallocate(ptr);}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Traits::deallocate\_large(ptr,\ \mbox{\hyperlink{include_2wjr_2arch_2x86_2biginteger_2detail_2gen__addrsblsh__n_8hpp_a42a1da88df05bc933612820bb42db3a2}{n}});}
\DoxyCodeLine{00095\ \ \ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool_a84ae4ef3bbd30e7a6f4891cac8a89194}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool}{dynamic\_object\_pool}}\ \&\mbox{\hyperlink{namespacewjr_a56d0d668021d5c217629d1f16fc2fb98}{lhs}},}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool}{dynamic\_object\_pool}}\ \&\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{rhs}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::addressof(\mbox{\hyperlink{namespacewjr_a56d0d668021d5c217629d1f16fc2fb98}{lhs}})\ ==\ std::addressof(\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{rhs}});}
\DoxyCodeLine{00100\ \ \ \ \ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool_ad756f7910c177d53deff59ec69c5a301}{operator!=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool}{dynamic\_object\_pool}}\ \&\mbox{\hyperlink{namespacewjr_a56d0d668021d5c217629d1f16fc2fb98}{lhs}},}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classwjr_1_1dynamic__object__pool}{dynamic\_object\_pool}}\ \&\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{rhs}})\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !(\mbox{\hyperlink{namespacewjr_a56d0d668021d5c217629d1f16fc2fb98}{lhs}}\ ==\ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{rhs}});}
\DoxyCodeLine{00105\ \ \ \ \ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00108\ \ \ \ \ \mbox{\hyperlink{classwjr_1_1arena}{arena}}\ m\_arena;}
\DoxyCodeLine{00109\ \ \ \ \ mem::detail::\_\_dynamic\_object\_pool\_impl\ m\_pool[tableSize];}
\DoxyCodeLine{00110\ \};}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00113\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classwjr_1_1object__pool}{object\_pool}}\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structwjr_1_1intrusive_1_1hlist__node}{node\_type}}\ =\ \mbox{\hyperlink{structwjr_1_1intrusive_1_1hlist__node}{intrusive::hlist\_node<>}};}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classwjr_1_1object__pool_a0fb7113cf6f169cf3e9f4e110a1ede95}{default\_cache\_size}}\ =\ \mbox{\hyperlink{classwjr_1_1arena_a3ee2a50869d44c89c2ad980f96f92ec5}{arena::default\_cache\_size}};}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \mbox{\hyperlink{classwjr_1_1object__pool_ac1b55cea645baa71df424f7b9fd00c14}{object\_pool}}(\textcolor{keywordtype}{size\_t}\ cache\ =\ \mbox{\hyperlink{classwjr_1_1object__pool_a0fb7113cf6f169cf3e9f4e110a1ede95}{default\_cache\_size}})\ :\ m\_arena(cache)\ \{\}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{WJR\_MALLOC}}\ T\ *\mbox{\hyperlink{classwjr_1_1object__pool_aeae224b8505194ee1c8b6caa96c29620}{allocate}}()\ \mbox{\hyperlink{namespacewjr_af89e8e658fd9c3a3b154c55677a3b528}{noexcept}}\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_head.\mbox{\hyperlink{structwjr_1_1intrusive_1_1hlist__node_af2d04015a3c9fe357af56af2e5129ea5}{next}}()\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ *ptr\ =\ m\_head.\mbox{\hyperlink{structwjr_1_1intrusive_1_1hlist__node_afdbc874b11fc7dd732ae38427af8d135}{pop\_front}}();}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}T\ *\textcolor{keyword}{>}(ptr);}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}T\ *\textcolor{keyword}{>}(m\_arena.\mbox{\hyperlink{classwjr_1_1arena_afcf3d05ba57b242f028eb2399dcd86cf}{allocate}}(\textcolor{keyword}{sizeof}(T)));}
\DoxyCodeLine{00128\ \ \ \ \ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classwjr_1_1object__pool_a7ad203cdd9e1d63c7a5e3e15ea9277c8}{deallocate}}(T\ *ptr)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ *\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{node}}\ =\ \textcolor{keyword}{reinterpret\_cast<}\mbox{\hyperlink{structwjr_1_1intrusive_1_1hlist__node}{node\_type}}\ *\textcolor{keyword}{>}(ptr);}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ m\_head.\mbox{\hyperlink{classwjr_1_1intrusive_1_1hlist__node__base_a411a4525ea62a60f29666df1ddb2de4b}{push\_front}}(\mbox{\hyperlink{namespacewjr_a1acbd863328d678d9e25f3a31ef82df0}{node}});}
\DoxyCodeLine{00133\ \ \ \ \ \}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00136\ \ \ \ \ node\_type\ m\_head;}
\DoxyCodeLine{00137\ \ \ \ \ \mbox{\hyperlink{classwjr_1_1arena}{arena}}\ m\_arena;}
\DoxyCodeLine{00138\ \};}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \}\ \textcolor{comment}{//\ namespace\ wjr}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ WJR\_MEMORY\_OBJECT\_POOL\_HPP\_\_}}

\end{DoxyCode}
